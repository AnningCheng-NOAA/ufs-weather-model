###############################################################################
#
#  FV3 CSAWMG test
#
###############################################################################

export TEST_DESCR="Compare FV3 gfsv16 csawmg results with previous trunk version"

export CNTL_DIR=fv3_gfsv16_csawmgt

export LIST_FILES="atmos_4xdaily.tile1.nc \
                   atmos_4xdaily.tile2.nc \
                   atmos_4xdaily.tile3.nc \
                   atmos_4xdaily.tile4.nc \
                   atmos_4xdaily.tile5.nc \
                   atmos_4xdaily.tile6.nc \
                   phyf000.nemsio \
                   phyf024.nemsio \
                   dynf000.nemsio \
                   dynf024.nemsio \
                   RESTART/coupler.res \
                   RESTART/fv_core.res.nc \
                   RESTART/fv_core.res.tile1.nc \
                   RESTART/fv_core.res.tile2.nc \
                   RESTART/fv_core.res.tile3.nc \
                   RESTART/fv_core.res.tile4.nc \
                   RESTART/fv_core.res.tile5.nc \
                   RESTART/fv_core.res.tile6.nc \
                   RESTART/fv_srf_wnd.res.tile1.nc \
                   RESTART/fv_srf_wnd.res.tile2.nc \
                   RESTART/fv_srf_wnd.res.tile3.nc \
                   RESTART/fv_srf_wnd.res.tile4.nc \
                   RESTART/fv_srf_wnd.res.tile5.nc \
                   RESTART/fv_srf_wnd.res.tile6.nc \
                   RESTART/fv_tracer.res.tile1.nc \
                   RESTART/fv_tracer.res.tile2.nc \
                   RESTART/fv_tracer.res.tile3.nc \
                   RESTART/fv_tracer.res.tile4.nc \
                   RESTART/fv_tracer.res.tile5.nc \
                   RESTART/fv_tracer.res.tile6.nc \
                   RESTART/phy_data.tile1.nc \
                   RESTART/phy_data.tile2.nc \
                   RESTART/phy_data.tile3.nc \
                   RESTART/phy_data.tile4.nc \
                   RESTART/phy_data.tile5.nc \
                   RESTART/phy_data.tile6.nc \
                   RESTART/sfc_data.tile1.nc \
                   RESTART/sfc_data.tile2.nc \
                   RESTART/sfc_data.tile3.nc \
                   RESTART/sfc_data.tile4.nc \
                   RESTART/sfc_data.tile5.nc \
                   RESTART/sfc_data.tile6.nc"


export_fv3

DT_ATMOS="600"

export INPUT_NML=gfsv16_csawmg.nml.IN
export FV3_RUN=gfsv16_csawmg_run.IN
export OUTPUT_GRID="'gaussian_grid'"
export OUTPUT_FILE="'nemsio'"
export WRITE_NEMSIOFLIP=.true.
export WRITE_FSYNCFLAG=.true.
export IAER=111

export NODES=$(expr $TASKS / $TPN + 1)
cp    @[RTPWD]/FV3_input_data_INCCN_aeroclim/MERRA2/merra2C.aerclim.2003-2014.*nc .
for n in 01 02 03 04 05 06 07 08 09 10 11 12; do
ln -sf merra2C.aerclim.2003-2014.m${n}.nc  aeroclim.m${n}.nc
done
cp    @[RTPWD]/FV3_input_data_INCCN_aeroclim/mg2_IN_CCN/cam5_4_143_NAAI_monclimo2.nc cam5_4_143_NAAI_monclimo2.nc
cp    @[RTPWD]/FV3_input_data_INCCN_aeroclim/mg2_IN_CCN/cam5_4_143_NPCCN_monclimo2.nc cam5_4_143_NPCCN_monclimo2.nc
cp    @[RTPWD]/FV3_input_data_INCCN_aeroclim/aer_data/LUTS/optics_BC.v1_3.dat  optics_BC.dat
cp    @[RTPWD]/FV3_input_data_INCCN_aeroclim/aer_data/LUTS/optics_OC.v1_3.dat  optics_OC.dat
cp    @[RTPWD]/FV3_input_data_INCCN_aeroclim/aer_data/LUTS/optics_DU.v15_3.dat optics_DU.dat
cp    @[RTPWD]/FV3_input_data_INCCN_aeroclim/aer_data/LUTS/optics_SS.v3_3.dat  optics_SS.dat
cp    @[RTPWD]/FV3_input_data_INCCN_aeroclim/aer_data/LUTS/optics_SU.v1_3.dat  optics_SU.dat

RUN_SCRIPT=rt_fv3.sh
